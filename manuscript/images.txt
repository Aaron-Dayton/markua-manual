{#images}
# Images

Just as in Markdown, in Markua images can be defined in one of two ways:

Inline
: The image is defined right where it is inserted.

Reference
: The image is defined separate from where it is inserted, and it is inserted in one or more places in the manuscript.

Regardless of whether an image is defined inline or by reference, an image can also inserted into the flow of a Markua document in one of two ways:

Span
: The image is inserted as part of the flow of text of a paragraph.

Figure
: The image is inserted as a figure, either nested in a paragraph like a block quote or as a top-level element.

## Inline Images

In Markua, an image can be defined right where it is inserted.

This syntax can be briefly described as follows:

`![Optional Alt Text](path/to/or/url/of/image "Optional Figure Caption")`

This is the preferred way in Markua to insert normal images which are only used once. The optional alt text and the optional figure caption are discussed after the Reference Images syntax is explained, since they are relevant for both syntaxes.

## Reference Images

In this syntax, an `id` is first defined for an image, like this:

`[image_id]: path/to/or/url/of/image "Optional Figure Caption"`

This `id` can then be used to insert an image, like this:

`![Optional Alt Text][image id]`

Note that the Optional Figure Caption is defined with the `id`, and this figure caption is used every single time the image is inserted via its `id`.

The reference style of image definition and insertion is supported for the following two reasons:

1. If an author who is familiar with Markdown strongly prefers it, there's no reason not to provide it. (There's nothing else that Markua would do with the reference syntax.)
2. For images which are used frequently (e.g. emoji), it is much better to define it once and use it multiple times.

## Alt text

In the Markua image syntax, just as with the Markdown image syntax, the optional alt text is in square brackets before the image insertion.  This is true for both inline and reference style of image insertion:

* Inline: `![Optional Alt Text](path/to/or/url/of/image "Optional Figure Caption")`
* Reference: `![Optional Alt Text][image id]`

The Optional Alt Text is text which is intended to take the place of the image if the image itself cannot be seen. The obvious use case is for readers with visual disabilities who are using a screen reader, but it also includes audiobooks and ebook readers which do not display images.

While the alt text is optional, it is important to have alt text. This is one reason why the image syntax puts it in the square brackets before the image path: you need to type the square brackets whenever inserting an image, so you might as well type some alt text. Empty square brackets look ugly--like a mistake--and it's a mistake to ignore the needs of readers with visual disabilities.

The alt text should not be the same thing as the figure caption, if the figure caption is present. (Imagine having your screen reader read identical alt text and figure captions to you.) Instead, the alt text should be descriptive of the image content, while the figure caption can be more creative. For example, a figure caption may be "Washington Crossing the Delaware" and the alt text could be "Denzel Washington riding a jet ski in a river". Having good alt text would enable readers who cannot see the image to still get the joke which the figure caption makes.

{#image_path_or_url}
## Image Path or URL

The `path_to_or_url_of_image.png` part is the relative path to the image inside the `resources` directory or the URL of the image on the internet. Both of these methods are described next.

### Images Path Approach

The `resources/` directory is not included in the path in the Markua manuscript; it is present in the generated HTML.

All images identified with a directory path must be inside the `resources` directory or one of its subdirectories. Implementors of Markua Processors must ensure they do not support navigating upward with `../` in paths.

A> **Why "resources"?**
A>
A> The `resources` directory can contain not just images, but also audio, video, code and other types of files. So, a generic name for this directory should be used. Either files or resources would be appropriate, and I chose resources since it's the same as the R in URL (Uniform Resource Locator) and since Markua documents can embed resources either from the local filesystem or via URLs.

A file called `foo.jpg` in the `resources` directory is referenced as `![](foo.jpg)` -- not as `![](/foo.jpg)`, `![](resources/foo.jpg)` or  `![](/resources/foo.jpg)`.

A file called `bar.png` in a subdirectory `foo` of the resources directory is referenced as `![](foo/bar.png)` -- not as `![](/foo/bar.png)`, `![](resources/foo/bar.png)` or  `![](/resources/foo/bar.png)`.

W> In Leanpub Flavoured Markdown, we included `images/` in the path of all images. This is not supported in Markua. Not only is it redundant, it incorrectly implies that the directory could be named anything, which is not the case. So, if there is resources/ in a path, a Markua processor **must** assume this is the name of a directory *inside* the resources directory.

### Images URL Approach

The URL approach with an image is simple: the URL is an absolute URL of an image on the internet. The URL must start with with either `http:` or `https:`; no other protocols are supported.

## Supported Image Types

Markua supports GIF, PNG, JPEG and SVG images. All images must be located inside the `resources` directory, regardless of type. The images must have the correct file extension for their type. Markua processors do not need to parse images to determine their type.

The supported file extensions are:

.gif
: The file is treated as a GIF image.

.jpg
: The file is treated as a JPEG image.

.jpeg
: The file is treated as a JPEG image.

.png
: The file is treated as a PNG image.

.svg
: The image is treated as an SVG image.

.svgz
: The image is treated as an SVG image which has been zipped.

.xml
: The image is treated as an SVG image.

{#spanimages}
## Span Images

Images can be inserted as a span image in the flow of text in a paragraph. When an image is inserted as a span image, it must be positioned where it is inserted -- it cannot be floated and repositioned by Markua processors.

A span image cannot have a caption. If a caption is present, a Markua processor will ignore it. (A Markua processor may add a warning to the list of warnings which are reported in book generation, but no warning is added to the text itself.)

### Examples of Span Images

#### Example 1: Span Images with Alt Text

Images can be inserted as a span image with alt text. Again, the alt text is intended to be read or heard instead of the image by readers who can't see the image, so it's important.

##### Markua Syntax

{#input_span_images_1}
```
Markua has a fancy ![Markua two trees logo](markua-logo-small.png) logo!

Markua also has a fancy ![Markua two trees icon](https://pbs.twimg.com/profile_images/525513829455650817/mIba4bYL_400x400.png) Twitter avatar!
```

##### HTML Output

{#output_span_images_1}
```
<p>Markua has a fancy <img src="resources/markua-logo-small.png" alt="Markua two trees logo"/> logo!</p>
<p>Markua also has a fancy <img src="https://pbs.twimg.com/profile_images/525513829455650817/mIba4bYL_400x400.png" alt="Markua two trees icon"/> Twitter avatar!</p>
```

#### Example 2: Span Images with no Alt Text

Images can be inserted as a span image with no alt text.

##### Markua Syntax

{#input_span_images_2}
```
Markua has a fancy ![](markua-logo-small.png) logo!
```

##### HTML Output

{#output_span_images_2}
```
<p>Markua has a fancy <img src="resources/markua-logo-small.png"/> logo!</p>
```

#### Example 3: Span Images Incorrectly Having a Caption

A span image cannot have a caption. If one is present, it is ignored.

##### Markua Syntax

{#input_span_images_3}
```
Markua has a fancy ![Markua two trees logo](markua-logo-small.png "This caption is ignored") logo!
```

##### HTML Output

{#output_span_images_3}
```
<p>Markua has a fancy <img src="resources/markua-logo-small.png" alt="Markua two trees logo"/> logo!</p>
```

## Image Figures

The most powerful way to insert an image in Markua is as a Figure. To do this you add an image on a line by itself.

To learn more, see the [Figures](#figures) chapter.