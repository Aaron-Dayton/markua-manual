# Images

In Markua, images can be inserted either inline as a span element, or on their own as a block element separated like any other block element by blank lines above and below.

When an image is inserted as a span element, it looks very similar to the Markdown hyperlink syntax. It just lives anywhere any text content can live. The image is inserted inline, and positioned according to the preference of the Markua Processor.

When an image is on its own line as a block element, it is referred to as a Figure. Figures are formatted specially, and show up in the List of Illustrations if one is present.

## Important Difference Between Markdown and Markua Image Syntax

In Markdown, images are inserted with the following syntax:

`![Optional Alt Text](path/to/image.png "Optional Title")`

The alt text and the caption are both optional. If neither are provided, the image is inserted like this:

`![](path/to/image.png)`

(Yes, the empty square brackets are required in Markdown.)

Markua uses a similar syntax, but with one **huge** change: the alt text and title are reversed.

Here's the Markua image syntax:

`![Optional Figure Caption](path/to/image.png "Optional Alt Text")`

I do not take this change lightly. Here's the reasoning behind it:

My opinion is that Markdown is inconsistent. To be more consistent, Markdown should have been:

`![Optional Title](path/to/image.png "Optional Alt Text")`

The alt text is only used in situations where you cannot see the image, for example, for readers who have visual disabilities and who are using screen readers, or for people whose browsers do not load images. Conceptually, the alt text is a replacement for the image. So, since the image is inside the parentheses, the alt text should be in there with the image.

Then, the title attribute would move to being inside the square brackets. This makes sense, since it mirrors the syntax for links. When you write a link in Markdown, you do so like this:

`[link text to display](the url)`

The stuff inside the square brackets is what is shown to readers of the HTML document.

Now, Markua is a format for producing books, not HTML.

So, in books, images may or may not have figure captions. However, figure captions, when present, are definitely displayed to the reader. They function like the text which is displayed for a link: the reader reads them.

`![Optional Figure Caption](path/to/image.png "Optional Alt Text")`

Now, it's important to have alt text, even in books. Alt text is not the same thing as a figure caption.

The alt text is text which is intended to be provided for readers who cannot see the image. This includes readers who are visually impaired, readers whose ebook readers do not display images and readers who are listening to the text as an audio book.

For example, a figure caption may be "Washington Crossing the Delaware" and the alt text would be "Denzel Washington riding a jet ski in a river". Having good alt text would enable readers who cannot see the image to still get the joke which the figure caption makes.

The downside of this decision is that it does mean that many authors will skip providing alt text, thereby making the reading experience worse for readers wwho cannot see the images. The way that skipping alt text would be done is like this:

`![Optional Figure Caption](path/to/image.png)`

While skipping alt text would be an unfortunate decision, this syntax is perfectly valid Markua.

## Markua Image Syntax Explained

The Markua image syntax is as follows:

`![Optional Figure Caption](path/to/image.png "Optional Alt Text")`

* The optional figure caption is enclosed in square brackets `[` and `]`.
* The alt text is in quotes, with a space after the path to the image.
* The `path/to/image.png` part is the relative path to the image inside the `images` directory. The `images/` is not included.

As discussed, all images are contained in a subdirectory of the manuscript directory called `images`, either top level or in nested subdirectories inside it. This `images` directory is the assumed root of the path. Implementors of Markua Processors must ensure they do not support navigating upward with `../` in paths.

* A file called `foo.jpg` in the `images` directory is referenced as `![](foo.jpg)` -- not as `![](/foo.jpg)`, `![](images/foo.jpg)` or  `![](/images/foo.jpg)`.
* A file called `bar.png` in a subdirectory `foo` of the images directory is referenced as `![](foo/bar.png)` -- not as `![](/foo/bar.png)`, `![](images/foo/bar.png)` or  `![](/images/foo/bar.png)`.

A> In Leanpub Flavoured Markdown, we included the `images/` in the path of all images. This is not supported in Markua. Not only is it redundant, it incorrectly implies that the directory could be named anything, which is not the case. So, if there is images/ in a path, a Markua processor must assume this is the name of a directory *inside* the images directory.

In Markua, images can be inserted in one of two ways:

1. Inline Images: The image is inserted as part of the flow of text. (This is called a "span" element.)
2. Figures: The image is inserted on a line by itself, separated by blank lines. (This is called a "block" element.)

In Markua, the alt text works the same way in both Inline Images and Figures: you enclose it in quotation marks `"` and `"`.

The Optional Figure Caption is enclosed in square brackets. It is text which is intended to displayed near the image (typically above or below it) to provide a caption for the image. In Markua, **the caption is only supported if the image is a Figure**, i.e. is being inserted as a block element, separated by blank lines from other content. If an image is inserted inline, the caption must be silently ignored.

For Figures, the caption shows up in two places:

1. somewhere near the image, typically above or below it, per the preference of the Markua Processor
2. as the name of the Figure in the List of Illustrations (a.k.a. Table of Figures)

{class: warning}
B> There is no support for Markdown's reference style images in Markua. One image syntax in figure and inline modes is plenty enough to remember.

## Inline Images (as Span Elements)

Images can be inserted inline in the flow of text in a paragraph. This is called a span element.

### Examples:

{#inline_images_1}
#### Example 1: Inline Images with no Alt Text

Images can be inserted inline with no alt text.

##### Markua Syntax

{#input_inline_images_1}
```
Markua has a spiffy ![](markua-logo-small.png) logo!
```

##### HTML Output

{#output_inline_images_1}
```
<p>Markua has a spiffy <img href="images/markua-logo-small.png" alt=""/> logo!</p>
```

A> The `alt=""` is required for legacy EPUB support.

##### Example Output

Markua has a spiffy ![](markua-logo-small.png) logo!

A> In this example output as with any inline image, Markua processors can position the image however they wish.

{#inline_images_2}
#### Example 2: Inline Images with Alt Text

Images can be inserted inline with alt text. Again, the alt text is intended to be read or heard instead of the image by readers who can't see the image.

##### Markua Syntax

{#input_inline_images_2}
```
Markua has a spiffy ![](markua-logo-small.png "the word Markua with the two asterisk trees beside it") logo!
```

##### HTML Output

{#output_inline_images_2}
```
<p>Markua has a spiffy <img href="images/markua-logo-small.png" alt="the word Markua with the two asterisk trees beside it"/> logo!</p>
```

##### Example Output

Markua has a spiffy ![](markua-logo-small.png "the word Markua with the two asterisk trees beside it") logo!

## Figures (as Block Elements)

The most powerful way to insert an image in Markua is on its own as a block element, separated like any other block element by blank lines above and below. With this approach, the image is a Figure. If it has a caption, the image caption also shows up in the List of Illustrations, as a crosslink to the image caption associated with the figure itself. Both the alt text and the caption can be present or absent, and these vary independently from each other.

### Examples

{#figures_1}
#### Example 1: Figures with Alt Text and a Caption

Ideally, a figure should have both alt text and a caption. The alt text is intended for readers who can't see the image, and the caption is intended to complement the image.

##### Markua Syntax

{#input_figures_1}
```
Markua has a spiffy logo:

![The Markua Logo](markua-logo.png "the word Markua with the two asterisk trees beside it")

Thanks Justin, it was fun making the logo with you!
```

##### HTML Output

{#output_figures_1}
```
<p>Markua has a spiffy logo:</p>
<div class="figure">
  <img href="images/markua-logo.png" alt="the word Markua with the two asterisk trees beside it"/>
  <p class="caption">The Markua Logo</p>
</div>
<p>Thanks Justin, it was fun making the logo with you!</p>
```

##### Example Output

Markua has a spiffy logo:

![The Markua Logo](markua-logo.png "the word Markua with the two asterisk trees beside it")

Thanks Justin, it was fun making the logo with you!

{#figures_2}
#### Example 2: Figures with no Alt Text or Caption

Images can be inserted as a figure even with no alt text or caption. If this is done, the image is still styled as a figure, but the image has no caption and does **not** show up in the List of Illustrations.

##### Markua Syntax

{#input_figures_2}
```
Markua has a spiffy logo:

![](markua-logo.png)

Thanks Justin, it was fun making the logo with you!
```

##### HTML Output

{#output_figures_2}
```
<p>Markua has a spiffy logo:</p>
<div class='figure'>
  <img alt="" href="images/markua-logo.png"/>
</div>
<p>Thanks Justin, it was fun making the logo with you!</p>
```

##### Example Output

Markua has a spiffy logo:

![](markua-logo.png)

Thanks Justin, it was fun making the logo with you!

{#figures_3}
#### Example 1: Figures with Alt Text but no Caption

The alt text and caption are both optional. This example shows a figure with alt text but no caption.

##### Markua Syntax

{#input_figures_3}
```
Markua has a spiffy logo:

![](markua-logo.png "the word Markua with the two asterisk trees beside it")

Thanks Justin, it was fun making the logo with you!
```

##### HTML Output

{#output_figures_3}
```
<p>Markua has a spiffy logo:</p>
<div class="figure">
  <img href="images/markua-logo.png" alt="the word Markua with the two asterisk trees beside it"/>
</div>
<p>Thanks Justin, it was fun making the logo with you!</p>
```

##### Example Output

Markua has a spiffy logo:

![](markua-logo.png "the word Markua with the two asterisk trees beside it")

Thanks Justin, it was fun making the logo with you!


{#figures_4}
#### Example 1: Figures with a Caption but no Alt Text

The alt text and caption are both optional. This example shows a figure with a caption but no alt text.

##### Markua Syntax

{#input_figures_4}
```
Markua has a spiffy logo:

![The Markua Logo](markua-logo.png)

Thanks Justin, it was fun making the logo with you!
```

##### HTML Output

{#output_figures_4}
```
<p>Markua has a spiffy logo:</p>
<div class="figure">
  <img href="images/markua-logo.png"/>
  <p class="caption">The Markua Logo</p>
</div>
<p>Thanks Justin, it was fun making the logo with you!</p>
```

##### Example Output

Markua has a spiffy logo:

![The Markua Logo](markua-logo.png)

Thanks Justin, it was fun making the logo with you!