# Markua Syntax Guide

Markua syntax is heavily based on Markdown syntax, and is adapted for the needs of books and documents. This is a quick reference to all of Markua's syntax, focusing on the happy path of how you are supposed to write Markua, and ignoring the complex edge cases.

Markua is used to generate PDF, EPUB, MOBI and HTML. While HTML is just one of the output formats of Markua, it is also the basis of EPUB. The Markua specification defines a precise mapping from Markua to HTML and to book and document concepts. The mapping to PDF, MOBI and other formats is implementation-dependent, as is the choice for the CSS to accompany the HTML produced by Markua.

So, in this quick reference, the HTML that is generated is mentioned where appropriate.

To learn the details of why Markua is the way it is, and for the full specification of Markua and of the HTML produced, read the rest of this specification. If you just want to know how to type proper Markua, just read this chapter.

## Text Formatting

* To produce *italic text*, surround it with either `_one underscore_` (producing `<i>`) or `*one asterisk*` (producing `<em>`).
* To produce **bold text**, surround it with either `__two underscores__` (producing `<b>`) or `**two asterisks**` (producing `<strong>`).
* To produce ***bold + italic text***, surround it with either `__three underscores__` (producing `<b><i>`), `***three asterisks***` (producing `<strong><em>`).
* To produce ____underlined text____, surround it with `____four underscores____` (producing `<u>`). This is gross, but it's a tradeoff for Markdown compatibility: one and two underscores were taken.
* To produce ~~strikethrough text~~, surround it with `~~two tildes~~`.
* To produce superscript like the 3 in 5^3^ = 125, surround it with carets like `5^3^ = 125`.
* To produce subscript like the 2 in H~2~O, surround it with single tildes like `H~2~O`.

## Paragraphs, Poetry and Whitespace

A paragraph is text with a blank line both above and below it. This produces a `<p>` tag in HTML.

The distinguishing thing about a paragraph is that there is nothing else distinguishing about it. All block elements that are not some specialized type (like a heading) are paragraphs. Note that since two newlines are added between all Markua files during the concatenation of multiple-file Markua documents, there is an assumed blank line at the top and bottom of each Markua file. So, you cannot make a paragraph (or any block element) span multiple Markua source files.

A single line break produces a forced line break, and a `<br/>` tag in HTML.

Whitespace (either spaces or tabs) is preserved at the beginning of a line.

You can write most poetry without any special formatting characters, such as the following:

I grant I never saw a goddess go;
My mistress when she walks treads on the ground.
    And yet, by heaven, I think my love as rare
    As any she belied with false compare.

Whitespace in between words, however, is reduced to one space. The primary reason for this is that it lets authors write books using either one or two spaces after a period, with there being no difference in the look. A secondary reason is that this is how things work in HTML (without using `&nbsp;`).

So, if you want to write poetry like e e cummings, you need to use a code block:

~~~
{code: poetry}
```
i am a cat
                        a        l a z y          cat
         me   ow
```
~~~

Whitespace is stripped from the ends of lines and files. Markdown's hack of adding two spaces at the end of a line to force a line break is not needed (or supported) in Markua, since a single line break already produces a line break, as it should.

## File Structure

A Markua document can be written in one file or multiple manuscript files.

If the multiple file approach is used, the listed files are first concatenated together by a Markua Processor to produce one temporary Markua manuscript file, and that one file is used as the input. The Markua Processor generates PDF, EPUB, MOBI and/or HTML output.

Importantly, in order to avoid a number of bugs, the files are not just concatenated together simply--they must be concatenated together with two newlines added between the end of each file and the beginning of the next file, in order to separate the content of the two files with one blank line between them.

Because of this, a paragraph (or any other block element) cannot span multiple manuscript files.

## Resources

Markua books can include various types of resources.

The default type of a resource is an `image`, but Markua also supports resources of type `audio`, `video`, `code`, `math` and `text`. Resources can be inserted inline or as figures, and can be stored and referenced either locally or on the web.

The syntax to define and insert a resource is as follows:

```
![Optional Alt Text](resource_path_or_url "Optional Figure Caption")
```

If a resource is inserted as part of the flow of text of a paragraph (even if there are single line breaks above or below it), the resource is considered to be an inline resource and the optional figure caption (in quotes) is ignored.

If a resource is inserted with at least one blank above and below it, it's a figure. Figures can have an attribute lists, e.g.:

```
{type: image, align: center, float: none, width: auto}
![Optional Alt Text](resource_path_or_url "Optional Figure Caption")
```

Supported attributes vary based on the `type` of resource. For images, the above values are the default values: by default a resource is assumed to be an image which is centered on the page and allowed to be its actual size, without overflowing into page margins. So, this attribute list is to their being no attribute list specified.

Examples of resources include:

```
![Denzel Washington riding a jet ski in a river](delaware.jpg "Washington Crossing the Delaware")

Are you feeling ![happy](happy.png) or ![sad](sad.png) today?

{type: video}
![poster: http://img.youtube.com/vi/VOCYL-FNbr0/mqdefault.jpg](https://www.youtube.com/watch?t=105&v=VOCYL-FNbr0 "Peter Armstrong's First Talk About Markua")

The full talk audio is here:

{type: audio}
![](audio.mp3)
```